apiVersion: v1
kind: Secret
metadata:
  name: antrea-ui-jwt-key
  namespace: {{ .Release.Namespace }}
data:
  key.pem: {{ genPrivateKey "rsa" | b64enc | quote }}
{{- $relnamespace := .Release.Namespace -}}
{{- with .Values.https }}
{{- if .enabled }}
{{- if eq .method "auto" }}
{{- with .auto }}
{{- $cert := genSelfSignedCert .commonName .ipAddresses .dnsNames (.daysValid | int) }}
---
apiVersion: v1
kind: Secret
metadata:
  name: antrea-ui-tls-cert
  namespace: {{ $relnamespace }}
data:
  cert.pem: {{ $cert.Cert | b64enc | quote }}
---
apiVersion: v1
kind: Secret
metadata:
  name: antrea-ui-tls-key
  namespace: {{ $relnamespace }}
data:
  key.pem: {{ $cert.Key | b64enc | quote }}
{{- end }}
{{- end }}
{{- end }}
{{- end }}
